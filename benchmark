#!/bin/bash
echo "Each language reports file count and time elapsed for CONDA_PREFIX"
echo

CP=$CONDA_PREFIX

echo -n "Golang | dups "
start=$(date +%s)
golang/find-dups/find-dups $CP 2>/dev/null >find-dups.golang 
grep '^  ' find-dups.golang | wc -l
end=$(date +%s)
echo $(numfmt --to=si --suffix=" secs" $(($end-$start)))

echo -n "Python | dups "
start=$(date +%s)
python/find-dups -m1 -i $CP >find-dups.python 2>/dev/null
grep '^  ' find-dups.python | wc -l
end=$(date +%s)
echo $(numfmt --to=si --suffix=" seconds" $(($end-$start)))

echo -n "Rust (rust-crypto) | dups "
start=$(date +%s)
rust/find-dups-rust-crypto/target/release/find-dups $CP 2>/dev/null >find-dups.rust
grep '^  ' find-dups.rust | wc -l
end=$(date +%s)
echo $(numfmt --to=si --suffix=" secs" $(($end-$start)))

echo -n "Rust (RustCrypto) | dups "
start=$(date +%s)
rust/find-dups-RustCrypto/target/release/find-dups $CP 2>/dev/null >find-dups.rust
grep '^  ' find-dups.rust | wc -l
end=$(date +%s)
echo $(numfmt --to=si --suffix=" secs" $(($end-$start)))

# Far too slow to run very much
#echo -n "Bash | dups "
#start=$(date +%s)
#bash/find-dups $CP >find-dups.bash
#grep '^  ' find-dups.bash | wc -l
#end=$(date +%s)
#echo $(numfmt --to=si --suffix=" seconds" $(($end-$start)))

